function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
/* eslint-disable */

/* global-module */
import objectUtil from './object-util.js';
class OcrResultParser {
  constructor() {
    _defineProperty(this, "__ocrTypeList", ['idcard', 'driver', 'passport', 'foreign-passport', 'alien', 'credit', 'idcard-ssa', 'driver-ssa', 'passport-ssa', 'foreign-passport-ssa', 'alien-ssa', 'credit-ssa']);
  }
  parseOcrResult(ocrType, ssaMode, ocrResult, ssaResult, ssaRetryCount, ssaResultList, ssaRetryType, ssaRetryPivot
  // 추후 위에 주석 풀어야함 - START
  // usePiiEncryptMode
  // 추후 위에 주석 풀어야함 - END
  ) {
    if (!this.__ocrTypeList.includes(ocrType)) throw new Error('ResultParser :: Unsupported OCR type');
    var legacyFormat = {};
    var newFormat = {};

    // SSA 처리
    if (ssaMode && !!ssaResult) {
      this.__parseSsaResult(ssaRetryType, ssaRetryPivot, ssaResult, ssaRetryCount, ssaResultList, ocrResult, legacyFormat);
    }
    switch (ocrType) {
      case 'idcard':
      case 'driver':
      case 'idcard-ssa':
      case 'driver-ssa':
        this.__parseIdDriver(ocrResult, legacyFormat);
        break;
      case 'passport':
      case 'passport-ssa':
      case 'foreign-passport':
      case 'foreign-passport-ssa':
        this.__parsePassport(ocrResult, legacyFormat);
        break;
      case 'alien':
      case 'alien-ssa':
        this.__parseAlien(ocrResult, legacyFormat);
        break;
      case 'credit':
        [legacyFormat, ocrResult] = this.__parseCredit(ocrResult, legacyFormat);
        break;
      default:
        throw new Error('Unsupported OCR type');
    }
    return {
      legacyFormat,
      newFormat: ocrResult
    };
  }

  // prettier-ignore
  __parseSsaResult(ssaRetryType, ssaRetryPivot, ssaResult, ssaRetryCount, ssaResultList, ocrResult, legacyFormat) {
    var ssaResultObj = objectUtil.csvToObject(ssaResult);
    ocrResult.fd_confidence = ssaResultObj.conf;
    ocrResult.id_truth = ssaResultObj.truth;
    ocrResult.id_truth_retry_count = ssaRetryCount;
    if (ssaResultList && ssaRetryCount > 0) {
      var truthResultDetail = [];
      for (var item of ssaResultList) {
        var tmpObj = objectUtil.csvToObject(item);
        var truthResult = {
          id_truth: tmpObj.truth,
          fd_confidence: tmpObj.conf
        }; // prettier-ignore
        truthResultDetail.push(truthResult);
      }
      ocrResult.id_truth_result_detail = truthResultDetail;
      if (ssaRetryType === 'ENSEMBLE') {
        var average = list => {
          var sum = list.map(el => Math.abs(ssaRetryPivot - el.fd_confidence)).reduce((acc, cur) => cur + acc, 0);
          if (isNaN(sum / list.length)) return Number.MAX_SAFE_INTEGER;
          return sum / list.length;
        };
        var fakeList = [];
        var realList = [];
        ocrResult.id_truth_result_detail.forEach(el => {
          if (el.id_truth === "FAKE") fakeList.push(el);
          if (el.id_truth === "REAL") realList.push(el);
        });
        var f_avg = average(fakeList); // fake 평균값
        var r_avg = average(realList); // real 평균값

        var f_abs = Math.abs(ssaRetryPivot - f_avg);
        var r_abs = Math.abs(ssaRetryPivot - r_avg);

        // real 에 더 근접함
        if (r_abs - f_abs < 0) ocrResult.id_truth = "REAL";
        // fake 에 더 근접하거나 같다면 FAKE
        if (f_abs - r_abs < 0 || r_abs - f_abs === 0) ocrResult.id_truth = "FAKE";
      }
    }
    var keyMapSsaResult = {
      truth: 'id_truth',
      truthConfidence: 'fd_confidence',
      truthRetryCount: 'id_truth_retry_count',
      truthResultDetail: 'id_truth_result_detail'
    };
    this.__convertLegacyFormat(ocrResult, legacyFormat, keyMapSsaResult);
    if (ssaResultList && ssaRetryCount > 0) {
      var tmpResultDetail = [];
      for (var idx in legacyFormat.truthResultDetail) {
        var keyMapSsaResultDetail = {
          truth: 'id_truth',
          truthConfidence: 'fd_confidence'
        };
        var detailLegacyFormat = {};
        this.__convertLegacyFormat(legacyFormat.truthResultDetail[idx], detailLegacyFormat, keyMapSsaResultDetail);
        tmpResultDetail.push(detailLegacyFormat);
      }
      legacyFormat.truthResultDetail = tmpResultDetail;
    }
  }
  __csvToObject(str) {
    var pairs = str.split(';');
    var obj = {};
    for (var i = 0; i < pairs.length; i++) {
      var pair = pairs[i].split(':');
      if (pair.length === 2) obj[pair[0]] = pair[1];
    }
    return obj;
  }
  __convertLegacyFormat(obj, legacyFormat, map) {
    for (var key in map) {
      legacyFormat[key] = typeof obj[map[key]] === 'object' ? _objectSpread({}, obj[map[key]]) : obj[map[key]];
    }
    return legacyFormat;
  }
  __getObjectValueWithDot(obj, key) {
    if (obj) {
      if (key.split('.').length === 1) {
        return obj[key];
      }
      var tmpKey = key.split('.')[0];
      var tmpKey2 = key.slice(tmpKey.length + 1, key.length);
      return this.__getObjectValueWithDot(obj[tmpKey], tmpKey2);
    }
  }
  __parseIdDriver(ocrResult, legacyFormat) {
    // 주민번호 형식 리턴값 형식 변경
    // birth 추가
    if (ocrResult.jumin !== undefined && ocrResult.jumin.length >= 6) {
      ocrResult.birth = ocrResult.jumin.slice(0, 6);
    }
    if (ocrResult.jumin !== undefined && ocrResult.jumin.length === 13) {
      ocrResult.jumin = ocrResult.jumin.slice(0, 6) + '-' + ocrResult.jumin.slice(6, 13);
    } else {
      ocrResult.jumin = '';
    }
    if (ocrResult.idType === '2') {
      // 구형 면허증 포멧 판정 (ex: 제주 13-001234-12 -> true)
      var regex = /[가-힣]/g;
      ocrResult.is_old_format_driver_number = !!ocrResult.driver_number.match(regex);
      if (ocrResult.is_old_format_driver_number) {
        // useb api 포멧에 맞게 변경 (to: 제주-13-001234-12)
        ocrResult.driver_number = ocrResult.driver_number.replace(' ', '-');
      }
    }
    var keyMapIdDriver = {
      Completed: 'complete',
      type: 'result_scan_type',
      name: 'name',
      number: 'jumin',
      Date: 'issued_date',
      region: 'region',
      licenseNumber: 'driver_number',
      isOldFormatLicenseNumber: 'is_old_format_driver_number',
      serial: 'driver_serial',
      licenseType: 'driver_type',
      color_point: 'color_point',
      face_score: 'found_face',
      specular: 'specular_ratio',
      start_t: 'start_time',
      end_t: 'end_time',
      id_type: 'result_scan_type'
    };
    this.__convertLegacyFormat(ocrResult, legacyFormat, keyMapIdDriver);
  }
  __parsePassport(ocrResult, legacyFormat) {
    // 주민번호 형식 리턴값 형식 변경
    if (ocrResult.jumin !== undefined && ocrResult.jumin.length === 13) {
      ocrResult.jumin = ocrResult.jumin.slice(0, 6) + '-' + ocrResult.jumin.slice(6, 13);
    } else {
      ocrResult.jumin = '';
    }
    var keyMapPassport = {
      Completed: 'complete',
      name: 'name',
      surName: 'sur_name',
      givenName: 'given_name',
      type: 'passport_type',
      issuing_country: 'issuing_country',
      passport_no: 'passport_number',
      nationality: 'nationality',
      date_of_issue: 'issued_date',
      sex: 'sex',
      date_of_expiry: 'expiry_date',
      personal_no: 'personal_number',
      number: 'jumin',
      date_of_birth: 'birthday',
      name_kor: 'name_kor',
      mrz1: 'mrz1',
      mrz2: 'mrz2',
      color_point: 'color_point',
      face_score: 'found_face',
      specular: 'specular_ratio',
      start_t: 'start_time',
      end_t: 'end_time',
      id_type: 'result_scan_type'
    };
    this.__convertLegacyFormat(ocrResult, legacyFormat, keyMapPassport);
  }
  __parseAlien(ocrResult, legacyFormat) {
    // 주민번호 형식 리턴값 형식 변경
    if (ocrResult.jumin !== undefined && ocrResult.jumin.length === 13) {
      ocrResult.jumin = ocrResult.jumin.slice(0, 6) + '-' + ocrResult.jumin.slice(6, 13);
    } else {
      ocrResult.jumin = '';
    }
    var keyMapAlien = {
      Completed: 'complete',
      name: 'name',
      number: 'jumin',
      Date: 'issued_date',
      nationality: 'nationality',
      visaType: 'visa_type',
      name_kor: 'name_kor',
      color_point: 'color_point',
      face_score: 'found_face',
      specular: 'specular_ratio',
      start_t: 'start_time',
      end_t: 'end_time',
      id_type: 'result_scan_type'
    };
    this.__convertLegacyFormat(ocrResult, legacyFormat, keyMapAlien);
  }
  __parseCredit(ocrResult, legacyFormat) {
    var resultSplit = ocrResult.split(',');
    var resultIndex = 0;
    if (resultIndex < resultSplit.length) legacyFormat.Completed = resultSplit[resultIndex], resultIndex++;
    if (resultIndex < resultSplit.length) legacyFormat.number = resultSplit[resultIndex], resultIndex++;
    if (resultIndex < resultSplit.length) legacyFormat.exp_date = resultSplit[resultIndex], resultIndex++;
    return [legacyFormat, legacyFormat];
  }
}
export default new OcrResultParser();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVscGVycy91c2ViLW9jci13YXNtLXBhcnNlci5qcyIsIm5hbWVzIjpbIm9iamVjdFV0aWwiLCJPY3JSZXN1bHRQYXJzZXIiLCJjb25zdHJ1Y3RvciIsIl9kZWZpbmVQcm9wZXJ0eSIsInBhcnNlT2NyUmVzdWx0Iiwib2NyVHlwZSIsInNzYU1vZGUiLCJvY3JSZXN1bHQiLCJzc2FSZXN1bHQiLCJzc2FSZXRyeUNvdW50Iiwic3NhUmVzdWx0TGlzdCIsInNzYVJldHJ5VHlwZSIsInNzYVJldHJ5UGl2b3QiLCJfX29jclR5cGVMaXN0IiwiaW5jbHVkZXMiLCJFcnJvciIsImxlZ2FjeUZvcm1hdCIsIm5ld0Zvcm1hdCIsIl9fcGFyc2VTc2FSZXN1bHQiLCJfX3BhcnNlSWREcml2ZXIiLCJfX3BhcnNlUGFzc3BvcnQiLCJfX3BhcnNlQWxpZW4iLCJfX3BhcnNlQ3JlZGl0Iiwic3NhUmVzdWx0T2JqIiwiY3N2VG9PYmplY3QiLCJmZF9jb25maWRlbmNlIiwiY29uZiIsImlkX3RydXRoIiwidHJ1dGgiLCJpZF90cnV0aF9yZXRyeV9jb3VudCIsInRydXRoUmVzdWx0RGV0YWlsIiwiaXRlbSIsInRtcE9iaiIsInRydXRoUmVzdWx0IiwicHVzaCIsImlkX3RydXRoX3Jlc3VsdF9kZXRhaWwiLCJhdmVyYWdlIiwibGlzdCIsInN1bSIsIm1hcCIsImVsIiwiTWF0aCIsImFicyIsInJlZHVjZSIsImFjYyIsImN1ciIsImlzTmFOIiwibGVuZ3RoIiwiTnVtYmVyIiwiTUFYX1NBRkVfSU5URUdFUiIsImZha2VMaXN0IiwicmVhbExpc3QiLCJmb3JFYWNoIiwiZl9hdmciLCJyX2F2ZyIsImZfYWJzIiwicl9hYnMiLCJrZXlNYXBTc2FSZXN1bHQiLCJ0cnV0aENvbmZpZGVuY2UiLCJ0cnV0aFJldHJ5Q291bnQiLCJfX2NvbnZlcnRMZWdhY3lGb3JtYXQiLCJ0bXBSZXN1bHREZXRhaWwiLCJpZHgiLCJrZXlNYXBTc2FSZXN1bHREZXRhaWwiLCJkZXRhaWxMZWdhY3lGb3JtYXQiLCJfX2NzdlRvT2JqZWN0Iiwic3RyIiwicGFpcnMiLCJzcGxpdCIsIm9iaiIsImkiLCJwYWlyIiwia2V5IiwiX29iamVjdFNwcmVhZCIsIl9fZ2V0T2JqZWN0VmFsdWVXaXRoRG90IiwidG1wS2V5IiwidG1wS2V5MiIsInNsaWNlIiwianVtaW4iLCJ1bmRlZmluZWQiLCJiaXJ0aCIsImlkVHlwZSIsInJlZ2V4IiwiaXNfb2xkX2Zvcm1hdF9kcml2ZXJfbnVtYmVyIiwiZHJpdmVyX251bWJlciIsIm1hdGNoIiwicmVwbGFjZSIsImtleU1hcElkRHJpdmVyIiwiQ29tcGxldGVkIiwidHlwZSIsIm5hbWUiLCJudW1iZXIiLCJEYXRlIiwicmVnaW9uIiwibGljZW5zZU51bWJlciIsImlzT2xkRm9ybWF0TGljZW5zZU51bWJlciIsInNlcmlhbCIsImxpY2Vuc2VUeXBlIiwiY29sb3JfcG9pbnQiLCJmYWNlX3Njb3JlIiwic3BlY3VsYXIiLCJzdGFydF90IiwiZW5kX3QiLCJpZF90eXBlIiwia2V5TWFwUGFzc3BvcnQiLCJzdXJOYW1lIiwiZ2l2ZW5OYW1lIiwiaXNzdWluZ19jb3VudHJ5IiwicGFzc3BvcnRfbm8iLCJuYXRpb25hbGl0eSIsImRhdGVfb2ZfaXNzdWUiLCJzZXgiLCJkYXRlX29mX2V4cGlyeSIsInBlcnNvbmFsX25vIiwiZGF0ZV9vZl9iaXJ0aCIsIm5hbWVfa29yIiwibXJ6MSIsIm1yejIiLCJrZXlNYXBBbGllbiIsInZpc2FUeXBlIiwicmVzdWx0U3BsaXQiLCJyZXN1bHRJbmRleCIsImV4cF9kYXRlIl0sInNvdXJjZXMiOlsiaGVscGVycy91c2ViLW9jci13YXNtLXBhcnNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSAqL1xuXG4vKiBnbG9iYWwtbW9kdWxlICovXG5pbXBvcnQgb2JqZWN0VXRpbCBmcm9tICcuL29iamVjdC11dGlsLmpzJztcbmNsYXNzIE9jclJlc3VsdFBhcnNlciB7XG4gIF9fb2NyVHlwZUxpc3QgPSBbJ2lkY2FyZCcsICdkcml2ZXInLCAncGFzc3BvcnQnLCAnZm9yZWlnbi1wYXNzcG9ydCcsICdhbGllbicsICdjcmVkaXQnLCAnaWRjYXJkLXNzYScsICdkcml2ZXItc3NhJywgJ3Bhc3Nwb3J0LXNzYScsICdmb3JlaWduLXBhc3Nwb3J0LXNzYScsICdhbGllbi1zc2EnLCAnY3JlZGl0LXNzYSddO1xuICBwYXJzZU9jclJlc3VsdChvY3JUeXBlLCBzc2FNb2RlLCBvY3JSZXN1bHQsIHNzYVJlc3VsdCwgc3NhUmV0cnlDb3VudCwgc3NhUmVzdWx0TGlzdCwgc3NhUmV0cnlUeXBlLCBzc2FSZXRyeVBpdm90XG4gIC8vIOy2lO2bhCDsnITsl5Ag7KO87ISdIO2SgOyWtOyVvO2VqCAtIFNUQVJUXG4gIC8vIHVzZVBpaUVuY3J5cHRNb2RlXG4gIC8vIOy2lO2bhCDsnITsl5Ag7KO87ISdIO2SgOyWtOyVvO2VqCAtIEVORFxuICApIHtcbiAgICBpZiAoIXRoaXMuX19vY3JUeXBlTGlzdC5pbmNsdWRlcyhvY3JUeXBlKSkgdGhyb3cgbmV3IEVycm9yKCdSZXN1bHRQYXJzZXIgOjogVW5zdXBwb3J0ZWQgT0NSIHR5cGUnKTtcbiAgICBsZXQgbGVnYWN5Rm9ybWF0ID0ge307XG4gICAgbGV0IG5ld0Zvcm1hdCA9IHt9O1xuXG4gICAgLy8gU1NBIOyymOumrFxuICAgIGlmIChzc2FNb2RlICYmICEhc3NhUmVzdWx0KSB7XG4gICAgICB0aGlzLl9fcGFyc2VTc2FSZXN1bHQoc3NhUmV0cnlUeXBlLCBzc2FSZXRyeVBpdm90LCBzc2FSZXN1bHQsIHNzYVJldHJ5Q291bnQsIHNzYVJlc3VsdExpc3QsIG9jclJlc3VsdCwgbGVnYWN5Rm9ybWF0KTtcbiAgICB9XG4gICAgc3dpdGNoIChvY3JUeXBlKSB7XG4gICAgICBjYXNlICdpZGNhcmQnOlxuICAgICAgY2FzZSAnZHJpdmVyJzpcbiAgICAgIGNhc2UgJ2lkY2FyZC1zc2EnOlxuICAgICAgY2FzZSAnZHJpdmVyLXNzYSc6XG4gICAgICAgIHRoaXMuX19wYXJzZUlkRHJpdmVyKG9jclJlc3VsdCwgbGVnYWN5Rm9ybWF0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdwYXNzcG9ydCc6XG4gICAgICBjYXNlICdwYXNzcG9ydC1zc2EnOlxuICAgICAgY2FzZSAnZm9yZWlnbi1wYXNzcG9ydCc6XG4gICAgICBjYXNlICdmb3JlaWduLXBhc3Nwb3J0LXNzYSc6XG4gICAgICAgIHRoaXMuX19wYXJzZVBhc3Nwb3J0KG9jclJlc3VsdCwgbGVnYWN5Rm9ybWF0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdhbGllbic6XG4gICAgICBjYXNlICdhbGllbi1zc2EnOlxuICAgICAgICB0aGlzLl9fcGFyc2VBbGllbihvY3JSZXN1bHQsIGxlZ2FjeUZvcm1hdCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnY3JlZGl0JzpcbiAgICAgICAgW2xlZ2FjeUZvcm1hdCwgb2NyUmVzdWx0XSA9IHRoaXMuX19wYXJzZUNyZWRpdChvY3JSZXN1bHQsIGxlZ2FjeUZvcm1hdCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBPQ1IgdHlwZScpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgbGVnYWN5Rm9ybWF0LFxuICAgICAgbmV3Rm9ybWF0OiBvY3JSZXN1bHRcbiAgICB9O1xuICB9XG5cbiAgLy8gcHJldHRpZXItaWdub3JlXG4gIF9fcGFyc2VTc2FSZXN1bHQoc3NhUmV0cnlUeXBlLCBzc2FSZXRyeVBpdm90LCBzc2FSZXN1bHQsIHNzYVJldHJ5Q291bnQsIHNzYVJlc3VsdExpc3QsIG9jclJlc3VsdCwgbGVnYWN5Rm9ybWF0KSB7XG4gICAgY29uc3Qgc3NhUmVzdWx0T2JqID0gb2JqZWN0VXRpbC5jc3ZUb09iamVjdChzc2FSZXN1bHQpO1xuICAgIG9jclJlc3VsdC5mZF9jb25maWRlbmNlID0gc3NhUmVzdWx0T2JqLmNvbmY7XG4gICAgb2NyUmVzdWx0LmlkX3RydXRoID0gc3NhUmVzdWx0T2JqLnRydXRoO1xuICAgIG9jclJlc3VsdC5pZF90cnV0aF9yZXRyeV9jb3VudCA9IHNzYVJldHJ5Q291bnQ7XG4gICAgaWYgKHNzYVJlc3VsdExpc3QgJiYgc3NhUmV0cnlDb3VudCA+IDApIHtcbiAgICAgIGxldCB0cnV0aFJlc3VsdERldGFpbCA9IFtdO1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHNzYVJlc3VsdExpc3QpIHtcbiAgICAgICAgY29uc3QgdG1wT2JqID0gb2JqZWN0VXRpbC5jc3ZUb09iamVjdChpdGVtKTtcbiAgICAgICAgY29uc3QgdHJ1dGhSZXN1bHQgPSB7XG4gICAgICAgICAgaWRfdHJ1dGg6IHRtcE9iai50cnV0aCxcbiAgICAgICAgICBmZF9jb25maWRlbmNlOiB0bXBPYmouY29uZlxuICAgICAgICB9OyAvLyBwcmV0dGllci1pZ25vcmVcbiAgICAgICAgdHJ1dGhSZXN1bHREZXRhaWwucHVzaCh0cnV0aFJlc3VsdCk7XG4gICAgICB9XG4gICAgICBvY3JSZXN1bHQuaWRfdHJ1dGhfcmVzdWx0X2RldGFpbCA9IHRydXRoUmVzdWx0RGV0YWlsO1xuICAgICAgaWYgKHNzYVJldHJ5VHlwZSA9PT0gJ0VOU0VNQkxFJykge1xuICAgICAgICBjb25zdCBhdmVyYWdlID0gbGlzdCA9PiB7XG4gICAgICAgICAgY29uc3Qgc3VtID0gbGlzdC5tYXAoZWwgPT4gTWF0aC5hYnMoc3NhUmV0cnlQaXZvdCAtIGVsLmZkX2NvbmZpZGVuY2UpKS5yZWR1Y2UoKGFjYywgY3VyKSA9PiBjdXIgKyBhY2MsIDApO1xuICAgICAgICAgIGlmIChpc05hTihzdW0gLyBsaXN0Lmxlbmd0aCkpIHJldHVybiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcbiAgICAgICAgICByZXR1cm4gc3VtIC8gbGlzdC5sZW5ndGg7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGZha2VMaXN0ID0gW107XG4gICAgICAgIGNvbnN0IHJlYWxMaXN0ID0gW107XG4gICAgICAgIG9jclJlc3VsdC5pZF90cnV0aF9yZXN1bHRfZGV0YWlsLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgIGlmIChlbC5pZF90cnV0aCA9PT0gXCJGQUtFXCIpIGZha2VMaXN0LnB1c2goZWwpO1xuICAgICAgICAgIGlmIChlbC5pZF90cnV0aCA9PT0gXCJSRUFMXCIpIHJlYWxMaXN0LnB1c2goZWwpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZl9hdmcgPSBhdmVyYWdlKGZha2VMaXN0KTsgLy8gZmFrZSDtj4nqt6DqsJJcbiAgICAgICAgY29uc3Qgcl9hdmcgPSBhdmVyYWdlKHJlYWxMaXN0KTsgLy8gcmVhbCDtj4nqt6DqsJJcblxuICAgICAgICBjb25zdCBmX2FicyA9IE1hdGguYWJzKHNzYVJldHJ5UGl2b3QgLSBmX2F2Zyk7XG4gICAgICAgIGNvbnN0IHJfYWJzID0gTWF0aC5hYnMoc3NhUmV0cnlQaXZvdCAtIHJfYXZnKTtcblxuICAgICAgICAvLyByZWFsIOyXkCDrjZQg6re87KCR7ZWoXG4gICAgICAgIGlmIChyX2FicyAtIGZfYWJzIDwgMCkgb2NyUmVzdWx0LmlkX3RydXRoID0gXCJSRUFMXCI7XG4gICAgICAgIC8vIGZha2Ug7JeQIOuNlCDqt7zsoJHtlZjqsbDrgpgg6rCZ64uk66m0IEZBS0VcbiAgICAgICAgaWYgKGZfYWJzIC0gcl9hYnMgPCAwIHx8IHJfYWJzIC0gZl9hYnMgPT09IDApIG9jclJlc3VsdC5pZF90cnV0aCA9IFwiRkFLRVwiO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBrZXlNYXBTc2FSZXN1bHQgPSB7XG4gICAgICB0cnV0aDogJ2lkX3RydXRoJyxcbiAgICAgIHRydXRoQ29uZmlkZW5jZTogJ2ZkX2NvbmZpZGVuY2UnLFxuICAgICAgdHJ1dGhSZXRyeUNvdW50OiAnaWRfdHJ1dGhfcmV0cnlfY291bnQnLFxuICAgICAgdHJ1dGhSZXN1bHREZXRhaWw6ICdpZF90cnV0aF9yZXN1bHRfZGV0YWlsJ1xuICAgIH07XG4gICAgdGhpcy5fX2NvbnZlcnRMZWdhY3lGb3JtYXQob2NyUmVzdWx0LCBsZWdhY3lGb3JtYXQsIGtleU1hcFNzYVJlc3VsdCk7XG4gICAgaWYgKHNzYVJlc3VsdExpc3QgJiYgc3NhUmV0cnlDb3VudCA+IDApIHtcbiAgICAgIGNvbnN0IHRtcFJlc3VsdERldGFpbCA9IFtdO1xuICAgICAgZm9yIChjb25zdCBpZHggaW4gbGVnYWN5Rm9ybWF0LnRydXRoUmVzdWx0RGV0YWlsKSB7XG4gICAgICAgIGNvbnN0IGtleU1hcFNzYVJlc3VsdERldGFpbCA9IHtcbiAgICAgICAgICB0cnV0aDogJ2lkX3RydXRoJyxcbiAgICAgICAgICB0cnV0aENvbmZpZGVuY2U6ICdmZF9jb25maWRlbmNlJ1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBkZXRhaWxMZWdhY3lGb3JtYXQgPSB7fTtcbiAgICAgICAgdGhpcy5fX2NvbnZlcnRMZWdhY3lGb3JtYXQobGVnYWN5Rm9ybWF0LnRydXRoUmVzdWx0RGV0YWlsW2lkeF0sIGRldGFpbExlZ2FjeUZvcm1hdCwga2V5TWFwU3NhUmVzdWx0RGV0YWlsKTtcbiAgICAgICAgdG1wUmVzdWx0RGV0YWlsLnB1c2goZGV0YWlsTGVnYWN5Rm9ybWF0KTtcbiAgICAgIH1cbiAgICAgIGxlZ2FjeUZvcm1hdC50cnV0aFJlc3VsdERldGFpbCA9IHRtcFJlc3VsdERldGFpbDtcbiAgICB9XG4gIH1cbiAgX19jc3ZUb09iamVjdChzdHIpIHtcbiAgICBsZXQgcGFpcnMgPSBzdHIuc3BsaXQoJzsnKTtcbiAgICBsZXQgb2JqID0ge307XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWlycy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IHBhaXIgPSBwYWlyc1tpXS5zcGxpdCgnOicpO1xuICAgICAgaWYgKHBhaXIubGVuZ3RoID09PSAyKSBvYmpbcGFpclswXV0gPSBwYWlyWzFdO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xuICB9XG4gIF9fY29udmVydExlZ2FjeUZvcm1hdChvYmosIGxlZ2FjeUZvcm1hdCwgbWFwKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gbWFwKSB7XG4gICAgICBsZWdhY3lGb3JtYXRba2V5XSA9IHR5cGVvZiBvYmpbbWFwW2tleV1dID09PSAnb2JqZWN0JyA/IHtcbiAgICAgICAgLi4ub2JqW21hcFtrZXldXVxuICAgICAgfSA6IG9ialttYXBba2V5XV07XG4gICAgfVxuICAgIHJldHVybiBsZWdhY3lGb3JtYXQ7XG4gIH1cbiAgX19nZXRPYmplY3RWYWx1ZVdpdGhEb3Qob2JqLCBrZXkpIHtcbiAgICBpZiAob2JqKSB7XG4gICAgICBpZiAoa2V5LnNwbGl0KCcuJykubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiBvYmpba2V5XTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRtcEtleSA9IGtleS5zcGxpdCgnLicpWzBdO1xuICAgICAgY29uc3QgdG1wS2V5MiA9IGtleS5zbGljZSh0bXBLZXkubGVuZ3RoICsgMSwga2V5Lmxlbmd0aCk7XG4gICAgICByZXR1cm4gdGhpcy5fX2dldE9iamVjdFZhbHVlV2l0aERvdChvYmpbdG1wS2V5XSwgdG1wS2V5Mik7XG4gICAgfVxuICB9XG4gIF9fcGFyc2VJZERyaXZlcihvY3JSZXN1bHQsIGxlZ2FjeUZvcm1hdCkge1xuICAgIC8vIOyjvOuvvOuyiO2YuCDtmJXsi50g66as7YS06rCSIO2YleyLnSDrs4Dqsr1cbiAgICAvLyBiaXJ0aCDstpTqsIBcbiAgICBpZiAob2NyUmVzdWx0Lmp1bWluICE9PSB1bmRlZmluZWQgJiYgb2NyUmVzdWx0Lmp1bWluLmxlbmd0aCA+PSA2KSB7XG4gICAgICBvY3JSZXN1bHQuYmlydGggPSBvY3JSZXN1bHQuanVtaW4uc2xpY2UoMCwgNik7XG4gICAgfVxuICAgIGlmIChvY3JSZXN1bHQuanVtaW4gIT09IHVuZGVmaW5lZCAmJiBvY3JSZXN1bHQuanVtaW4ubGVuZ3RoID09PSAxMykge1xuICAgICAgb2NyUmVzdWx0Lmp1bWluID0gb2NyUmVzdWx0Lmp1bWluLnNsaWNlKDAsIDYpICsgJy0nICsgb2NyUmVzdWx0Lmp1bWluLnNsaWNlKDYsIDEzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2NyUmVzdWx0Lmp1bWluID0gJyc7XG4gICAgfVxuICAgIGlmIChvY3JSZXN1bHQuaWRUeXBlID09PSAnMicpIHtcbiAgICAgIC8vIOq1rO2YlSDrqbTtl4jspp0g7Y+s66mnIO2MkOyglSAoZXg6IOygnOyjvCAxMy0wMDEyMzQtMTIgLT4gdHJ1ZSlcbiAgICAgIGNvbnN0IHJlZ2V4ID0gL1vqsIAt7Z6jXS9nO1xuICAgICAgb2NyUmVzdWx0LmlzX29sZF9mb3JtYXRfZHJpdmVyX251bWJlciA9ICEhb2NyUmVzdWx0LmRyaXZlcl9udW1iZXIubWF0Y2gocmVnZXgpO1xuICAgICAgaWYgKG9jclJlc3VsdC5pc19vbGRfZm9ybWF0X2RyaXZlcl9udW1iZXIpIHtcbiAgICAgICAgLy8gdXNlYiBhcGkg7Y+s66mn7JeQIOunnuqyjCDrs4Dqsr0gKHRvOiDsoJzso7wtMTMtMDAxMjM0LTEyKVxuICAgICAgICBvY3JSZXN1bHQuZHJpdmVyX251bWJlciA9IG9jclJlc3VsdC5kcml2ZXJfbnVtYmVyLnJlcGxhY2UoJyAnLCAnLScpO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBrZXlNYXBJZERyaXZlciA9IHtcbiAgICAgIENvbXBsZXRlZDogJ2NvbXBsZXRlJyxcbiAgICAgIHR5cGU6ICdyZXN1bHRfc2Nhbl90eXBlJyxcbiAgICAgIG5hbWU6ICduYW1lJyxcbiAgICAgIG51bWJlcjogJ2p1bWluJyxcbiAgICAgIERhdGU6ICdpc3N1ZWRfZGF0ZScsXG4gICAgICByZWdpb246ICdyZWdpb24nLFxuICAgICAgbGljZW5zZU51bWJlcjogJ2RyaXZlcl9udW1iZXInLFxuICAgICAgaXNPbGRGb3JtYXRMaWNlbnNlTnVtYmVyOiAnaXNfb2xkX2Zvcm1hdF9kcml2ZXJfbnVtYmVyJyxcbiAgICAgIHNlcmlhbDogJ2RyaXZlcl9zZXJpYWwnLFxuICAgICAgbGljZW5zZVR5cGU6ICdkcml2ZXJfdHlwZScsXG4gICAgICBjb2xvcl9wb2ludDogJ2NvbG9yX3BvaW50JyxcbiAgICAgIGZhY2Vfc2NvcmU6ICdmb3VuZF9mYWNlJyxcbiAgICAgIHNwZWN1bGFyOiAnc3BlY3VsYXJfcmF0aW8nLFxuICAgICAgc3RhcnRfdDogJ3N0YXJ0X3RpbWUnLFxuICAgICAgZW5kX3Q6ICdlbmRfdGltZScsXG4gICAgICBpZF90eXBlOiAncmVzdWx0X3NjYW5fdHlwZSdcbiAgICB9O1xuICAgIHRoaXMuX19jb252ZXJ0TGVnYWN5Rm9ybWF0KG9jclJlc3VsdCwgbGVnYWN5Rm9ybWF0LCBrZXlNYXBJZERyaXZlcik7XG4gIH1cbiAgX19wYXJzZVBhc3Nwb3J0KG9jclJlc3VsdCwgbGVnYWN5Rm9ybWF0KSB7XG4gICAgLy8g7KO866+867KI7Zi4IO2YleyLnSDrpqzthLTqsJIg7ZiV7IudIOuzgOqyvVxuICAgIGlmIChvY3JSZXN1bHQuanVtaW4gIT09IHVuZGVmaW5lZCAmJiBvY3JSZXN1bHQuanVtaW4ubGVuZ3RoID09PSAxMykge1xuICAgICAgb2NyUmVzdWx0Lmp1bWluID0gb2NyUmVzdWx0Lmp1bWluLnNsaWNlKDAsIDYpICsgJy0nICsgb2NyUmVzdWx0Lmp1bWluLnNsaWNlKDYsIDEzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2NyUmVzdWx0Lmp1bWluID0gJyc7XG4gICAgfVxuICAgIGNvbnN0IGtleU1hcFBhc3Nwb3J0ID0ge1xuICAgICAgQ29tcGxldGVkOiAnY29tcGxldGUnLFxuICAgICAgbmFtZTogJ25hbWUnLFxuICAgICAgc3VyTmFtZTogJ3N1cl9uYW1lJyxcbiAgICAgIGdpdmVuTmFtZTogJ2dpdmVuX25hbWUnLFxuICAgICAgdHlwZTogJ3Bhc3Nwb3J0X3R5cGUnLFxuICAgICAgaXNzdWluZ19jb3VudHJ5OiAnaXNzdWluZ19jb3VudHJ5JyxcbiAgICAgIHBhc3Nwb3J0X25vOiAncGFzc3BvcnRfbnVtYmVyJyxcbiAgICAgIG5hdGlvbmFsaXR5OiAnbmF0aW9uYWxpdHknLFxuICAgICAgZGF0ZV9vZl9pc3N1ZTogJ2lzc3VlZF9kYXRlJyxcbiAgICAgIHNleDogJ3NleCcsXG4gICAgICBkYXRlX29mX2V4cGlyeTogJ2V4cGlyeV9kYXRlJyxcbiAgICAgIHBlcnNvbmFsX25vOiAncGVyc29uYWxfbnVtYmVyJyxcbiAgICAgIG51bWJlcjogJ2p1bWluJyxcbiAgICAgIGRhdGVfb2ZfYmlydGg6ICdiaXJ0aGRheScsXG4gICAgICBuYW1lX2tvcjogJ25hbWVfa29yJyxcbiAgICAgIG1yejE6ICdtcnoxJyxcbiAgICAgIG1yejI6ICdtcnoyJyxcbiAgICAgIGNvbG9yX3BvaW50OiAnY29sb3JfcG9pbnQnLFxuICAgICAgZmFjZV9zY29yZTogJ2ZvdW5kX2ZhY2UnLFxuICAgICAgc3BlY3VsYXI6ICdzcGVjdWxhcl9yYXRpbycsXG4gICAgICBzdGFydF90OiAnc3RhcnRfdGltZScsXG4gICAgICBlbmRfdDogJ2VuZF90aW1lJyxcbiAgICAgIGlkX3R5cGU6ICdyZXN1bHRfc2Nhbl90eXBlJ1xuICAgIH07XG4gICAgdGhpcy5fX2NvbnZlcnRMZWdhY3lGb3JtYXQob2NyUmVzdWx0LCBsZWdhY3lGb3JtYXQsIGtleU1hcFBhc3Nwb3J0KTtcbiAgfVxuICBfX3BhcnNlQWxpZW4ob2NyUmVzdWx0LCBsZWdhY3lGb3JtYXQpIHtcbiAgICAvLyDso7zrr7zrsojtmLgg7ZiV7IudIOumrO2EtOqwkiDtmJXsi50g67OA6rK9XG4gICAgaWYgKG9jclJlc3VsdC5qdW1pbiAhPT0gdW5kZWZpbmVkICYmIG9jclJlc3VsdC5qdW1pbi5sZW5ndGggPT09IDEzKSB7XG4gICAgICBvY3JSZXN1bHQuanVtaW4gPSBvY3JSZXN1bHQuanVtaW4uc2xpY2UoMCwgNikgKyAnLScgKyBvY3JSZXN1bHQuanVtaW4uc2xpY2UoNiwgMTMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvY3JSZXN1bHQuanVtaW4gPSAnJztcbiAgICB9XG4gICAgY29uc3Qga2V5TWFwQWxpZW4gPSB7XG4gICAgICBDb21wbGV0ZWQ6ICdjb21wbGV0ZScsXG4gICAgICBuYW1lOiAnbmFtZScsXG4gICAgICBudW1iZXI6ICdqdW1pbicsXG4gICAgICBEYXRlOiAnaXNzdWVkX2RhdGUnLFxuICAgICAgbmF0aW9uYWxpdHk6ICduYXRpb25hbGl0eScsXG4gICAgICB2aXNhVHlwZTogJ3Zpc2FfdHlwZScsXG4gICAgICBuYW1lX2tvcjogJ25hbWVfa29yJyxcbiAgICAgIGNvbG9yX3BvaW50OiAnY29sb3JfcG9pbnQnLFxuICAgICAgZmFjZV9zY29yZTogJ2ZvdW5kX2ZhY2UnLFxuICAgICAgc3BlY3VsYXI6ICdzcGVjdWxhcl9yYXRpbycsXG4gICAgICBzdGFydF90OiAnc3RhcnRfdGltZScsXG4gICAgICBlbmRfdDogJ2VuZF90aW1lJyxcbiAgICAgIGlkX3R5cGU6ICdyZXN1bHRfc2Nhbl90eXBlJ1xuICAgIH07XG4gICAgdGhpcy5fX2NvbnZlcnRMZWdhY3lGb3JtYXQob2NyUmVzdWx0LCBsZWdhY3lGb3JtYXQsIGtleU1hcEFsaWVuKTtcbiAgfVxuICBfX3BhcnNlQ3JlZGl0KG9jclJlc3VsdCwgbGVnYWN5Rm9ybWF0KSB7XG4gICAgY29uc3QgcmVzdWx0U3BsaXQgPSBvY3JSZXN1bHQuc3BsaXQoJywnKTtcbiAgICBsZXQgcmVzdWx0SW5kZXggPSAwO1xuICAgIGlmIChyZXN1bHRJbmRleCA8IHJlc3VsdFNwbGl0Lmxlbmd0aCkgbGVnYWN5Rm9ybWF0LkNvbXBsZXRlZCA9IHJlc3VsdFNwbGl0W3Jlc3VsdEluZGV4XSwgcmVzdWx0SW5kZXgrKztcbiAgICBpZiAocmVzdWx0SW5kZXggPCByZXN1bHRTcGxpdC5sZW5ndGgpIGxlZ2FjeUZvcm1hdC5udW1iZXIgPSByZXN1bHRTcGxpdFtyZXN1bHRJbmRleF0sIHJlc3VsdEluZGV4Kys7XG4gICAgaWYgKHJlc3VsdEluZGV4IDwgcmVzdWx0U3BsaXQubGVuZ3RoKSBsZWdhY3lGb3JtYXQuZXhwX2RhdGUgPSByZXN1bHRTcGxpdFtyZXN1bHRJbmRleF0sIHJlc3VsdEluZGV4Kys7XG4gICAgcmV0dXJuIFtsZWdhY3lGb3JtYXQsIGxlZ2FjeUZvcm1hdF07XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IG5l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
